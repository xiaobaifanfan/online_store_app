(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/message/message"],{"0f15":function(e,t,o){"use strict";var s=o("aacf"),n=o.n(s);n.a},"157b":function(e,t,o){"use strict";var s,n=function(){var e=this,t=e.$createElement,o=(e._self._c,e.__map(e.messageList,(function(t,o){var s=t.add_time.split(" ");return{$orig:e.__get_orig(t),g0:s}})));e.$mp.data=Object.assign({},{$root:{l0:o}})},i=[];o.d(t,"b",(function(){return n})),o.d(t,"c",(function(){return i})),o.d(t,"a",(function(){return s}))},3586:function(e,t,o){"use strict";(function(e){o("2396"),o("921b");s(o("66fd"));var t=s(o("848fa"));function s(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("6e42")["createPage"])},"5cf0":function(e,t,o){"use strict";o.r(t);var s=o("80c9"),n=o.n(s);for(var i in s)"default"!==i&&function(e){o.d(t,e,(function(){return s[e]}))}(i);t["default"]=n.a},"80c9":function(e,t,o){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s={onShow:function(){this.loadData()},data:function(){return{messageList:[],array:["留言","投诉","询问","售后","求购"],index:0,form:{message_type:1,subject:"",message:"",file:""},file:""}},methods:{bindPickerChange:function(e){this.index=e.target.value,this.form.message_type=e.target.value+1},loadData:function(){var e=this;this.$request("messages","GET",{},this,(function(t){e.messageList=t}))},drop:function(t){var o=this;this.$request("messages/"+t+"/","DELETE",{},this,(function(t){e.showToast({title:"删除成功",icon:"success"}),setTimeout(o.loadData,2e3)}))},openPopup:function(){this.$refs.popup.open()},closePopup:function(){this.$refs.popup.close()},resultPath:function(e){o("log","asdasdasd"," at pages\\user\\message\\message.vue:119"),o("log",e," at pages\\user\\message\\message.vue:120"),this.file="file://"+e,this.form.file=e},openFile:function(){if("android"!=plus.os.name.toLowerCase())return e.showModal({title:"提示",content:"仅支持Android平台",success:function(e){}}),!1;var t=this,o=plus.android.runtimeMainActivity(),s=plus.android.importClass("android.content.Intent"),n=new s(s.ACTION_GET_CONTENT);n.setType("*/*"),n.addCategory(s.CATEGORY_OPENABLE),o.startActivityForResult(n,1),o.onActivityResult=function(e,s,n){var i=plus.android.importClass("android.app.Activity"),a=(plus.android.importClass("android.content.ContentUris"),plus.android.importClass("android.database.Cursor"),plus.android.importClass("android.net.Uri"),plus.android.importClass("android.os.Build")),r=plus.android.importClass("android.os.Environment"),u=plus.android.importClass("android.provider.DocumentsContract"),l=plus.android.importClass("android.provider.MediaStore"),d=o.getContentResolver();plus.android.importClass(d);var c="";if(s==i.RESULT_OK){var f=n.getData();if("file"==f.getScheme().toLowerCase())return void(c=f.getPath());c=a.VERSION.SDK_INT>a.VERSION_CODES.KITKAT?m(this,f):g(f),t.resultPath(c)}function m(e,t){var o=a.VERSION.SDK_INT>=a.VERSION_CODES.KITKAT,s=t.getScheme().toLowerCase();if(o&&u.isDocumentUri(e,t)){if(v(t)){var n=u.getDocumentId(t),i=n.split(":"),d=i[0];return"primary"==d.toLowerCase()?r.getExternalStorageDirectory()+"/"+i[1]:"/storage/"+d+"/"+i[1]}if(h(t)){var c=u.getDocumentId(t),f=c.split(":");return f[1]}if(T(t)){var m=u.getDocumentId(t),g=m.split(":"),C=g[0],_=null;"image"==C.toLowerCase()?_=l.Images.Media.EXTERNAL_CONTENT_URI:"video"==C.toLowerCase()?_=l.Video.Media.EXTERNAL_CONTENT_URI:"audio"==C.toLowerCase()&&(_=l.Audio.Media.EXTERNAL_CONTENT_URI);var E="_id=?",w=[g[1]];return p(e,_,E,w)}}else{if("content"==s)return p(e,t,null,null);if("file"==s)return t.getPath()}}function g(e){var t=null,o=[l.Images.Media.DATA],s=d.query(e,o,null,null,null);if(null!=s&&s.moveToFirst()){var n=s.getColumnIndexOrThrow(l.Images.Media.DATA);t=s.getString(n),s.close()}return t}function p(e,t,o,s){var n=null,i="_data",a=[i];if(n=d.query(t,a,o,s,null),null!=n&&n.moveToFirst()){var r=n.getColumnIndexOrThrow(i);return n.getString(r)}}function v(e){return"com.android.externalstorage.documents"==e.getAuthority()}function h(e){return"com.android.providers.downloads.documents"==e.getAuthority()}function T(e){return"com.android.providers.media.documents"==e.getAuthority()}}},submit:function(){var t=this,s=this.$store.state.token;""!=this.file?(e.showLoading({}),o("log",this.file," at pages\\user\\message\\message.vue:295"),e.uploadFile({url:"http://101.133.224.55:8001/messages/",filePath:t.file,name:"file",header:{Authorization:"JWT "+s},formData:{message_type:t.form.message_type,subject:t.form.subject,message:t.form.message},success:function(s){o("log",s," at pages\\user\\message\\message.vue:309"),401==s.statusCode?(t.$store.commit("logout"),e.clearStorageSync(),e.showToast({title:"登录已失效,即将跳转登录",icon:"none",duration:2e3}),setTimeout((function(){e.navigateTo({url:"/pages/public/login"}),rediToLoginType=!1}),2e3)):201==s.statusCode?(e.showToast({title:"提交成功",icon:"success"}),t.file="",t.form={message_type:1,subject:"",message:"",file:""},t.index=0,setTimeout(t.loadData,2e3)):e.showToast({title:"提交失败",icon:"none"})},fail:function(){e.showToast({title:"提交失败",icon:"none"})},complete:function(){e.hideLoading()}})):e.showToast({title:"请选择文件",icon:"none"})}}};t.default=s}).call(this,o("6e42")["default"],o("0de9")["default"])},"848fa":function(e,t,o){"use strict";o.r(t);var s=o("157b"),n=o("5cf0");for(var i in n)"default"!==i&&function(e){o.d(t,e,(function(){return n[e]}))}(i);o("0f15");var a,r=o("f0c5"),u=Object(r["a"])(n["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],a);t["default"]=u.exports},aacf:function(e,t,o){}},[["3586","common/runtime","common/vendor"]]]);